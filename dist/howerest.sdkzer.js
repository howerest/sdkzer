/*! sdkzer 1.6.0 - By David Valin - www.davidvalin.com */!function(e){var t={};function r(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t){e.exports=js-webservices},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=1},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(__webpack_require__(1),exports);void 0!==t&&(module.exports=t)}else __WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__,exports,__webpack_require__(0)],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=e)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var js_webservices_1=require("js-webservices"),Sdkzer=function(){function Sdkzer(e){for(var t in void 0===e&&(e={}),this.invalidMessages={},this.syncing=!1,this.lastResponse=null,this.attrs={id:null},this.pAttrs={id:null},this.setDefaults(),e)this.attrs[t]=e[t],this.pAttrs[t]=e[t]}return Sdkzer.configure=function(e){if(e.defaultHttpHeaders){Sdkzer.DEFAULT_HTTP_HEADERS=[];for(var t=0;t<e.defaultHttpHeaders.length;t++)Sdkzer.DEFAULT_HTTP_HEADERS.push(new js_webservices_1.WebServices.HttpHeader(e.defaultHttpHeaders[t]))}},Sdkzer.usingRestfulCrudHttpPattern=function(){return"restful_crud"===Sdkzer.HTTP_PATTERN},Sdkzer.usingCustomHttpPattern=function(){return"restful_crud"!==Sdkzer.HTTP_PATTERN},Sdkzer.usingParentsFetchStrategy=function(){return"none"!==Sdkzer.PARENTS_FETCH_STRATEGY},Sdkzer.getHttpQueryGuessConfigFor=function(e){return Sdkzer.usingRestfulCrudHttpPattern()?Sdkzer.HTTP_QUERY_GUESS_CONFIG.restful_crud:Sdkzer.HTTP_QUERY_GUESS_CONFIG.custom},Sdkzer.prototype.setDefaults=function(){if(this.defaults()){var e=this.defaults();for(var t in e)this.attrs[t]=e[t]}},Sdkzer.prototype.defaults=function(){return{}},Sdkzer.prototype.isValid=function(){for(var e=0,t=Object.keys(this.invalidMessages);e<t.length;e++){var r=t[e];if(this.invalidMessages[r]&&this.invalidMessages[r].length>0)return!1}return!0},Sdkzer.prototype.validate=function(){for(var e,t,r=0,s=Object.keys(this.validationRules);r<s.length;r++){e=s[r];for(var n=0,i=this.validationRules[e];n<i.length;n++)(t=i[n]).isValid(this.pAttrs[e],this.attrs[e])?this.invalidMessages[e]=[]:(this.invalidMessages[e]||(this.invalidMessages[e]=[]),this.invalidMessages[e].push(t.invalidMessage))}},Sdkzer.prototype.attr=function(attrName,value){if(void 0===attrName||void 0===value){if(void 0!==attrName&&void 0===value){for(var attrKeys=attrName.split("."),attrValue=this.attrs[attrName.split(".")[0]],i=1;i<attrKeys.length;i++)attrValue=attrValue[attrKeys[i]];return attrValue}return this.attrs}var attrKeys=attrName.split("."),attrKeyName="";eval("this.attrs['"+attrKeys.join("']['")+"'] = "+("string"==typeof value?"'"+value+"'":value))},Sdkzer.prototype.baseEndpoint=function(){return null},Sdkzer.prototype.resourceEndpoint=function(){return""},Sdkzer.prototype.isNew=function(){return null===this.attrs.id||null===this.lastResponse},Sdkzer.prototype.hasChanged=function(){return this.changedAttrs().length>0},Sdkzer.prototype.hasAttrChanged=function(e){var t,r=this.changedAttrs();for(t=0;t<r.length;t++)if(r[t]===e)return!0;return!1},Sdkzer.prototype.changedAttrs=function(){var e,t,r=[],s=Object.keys(this.attrs),n=Object.keys(this.pAttrs);for(e=0;e<=s.length;e++)for(t=0;t<=n.length;t++)if(null!==s[e]&&s[e]===n[t]&&this.attrs[s[e]]!==this.pAttrs[n[t]]){r.push(s[e]);break}return r},Sdkzer.prototype.prevAttrs=function(){var e={};for(var t in this.attrs)this.pAttrs[t]!==this.attrs[t]&&(e[t]=this.pAttrs[t]?this.pAttrs[t]:null);return e},Sdkzer.prototype.prevValue=function(e){return this.prevAttrs()[e]},Sdkzer.prototype.fetch=function(e,t){void 0===t&&(t=!0);var r,s=this;if(this.attrs.id){this.syncing=!0;var n=new js_webservices_1.WebServices.HttpQuery({httpMethod:"GET",endpoint:this.baseEndpoint()+"/"+this.attrs.id,headers:Sdkzer.DEFAULT_HTTP_HEADERS?Sdkzer.DEFAULT_HTTP_HEADERS:[],qsParams:{},data:{}});void 0!==e&&(n=js_webservices_1.WebServices.Merger.mergeHttpQueries([n,e])),(r=new js_webservices_1.WebServices.HttpRequest(n).promise).then(function(e){s.syncing=!1;var t=s.$parse(e.data);s.pAttrs=t,s.attrs=t},function(e){s.syncing=!1})}return void 0===r&&(r=Promise.reject(!1)),r},Sdkzer.prototype.$parse=function(e,t){return null!==t&&e[t]?e[t]:e},Sdkzer.prototype.toOriginJSON=function(){return this.attrs},Sdkzer.prototype.toOriginXML=function(){return""},Sdkzer.prototype.toOrigin=function(e){switch(e){case"json":this.toOriginJSON();break;case"xml":this.toOriginXML()}return this.attrs},Sdkzer.prototype.save=function(e){void 0===e&&(e=[]);var t,r=this,s=null==this.attr("id")?"POST":"PUT";return t="POST"==s?new js_webservices_1.WebServices.HttpQuery({httpMethod:s,endpoint:this.baseEndpoint(),headers:Sdkzer.DEFAULT_HTTP_HEADERS?Sdkzer.DEFAULT_HTTP_HEADERS:[],qsParams:{},data:this.toOriginJSON()}):new js_webservices_1.WebServices.HttpQuery({httpMethod:s,endpoint:this.baseEndpoint()+"/"+this.attrs.id,headers:Sdkzer.DEFAULT_HTTP_HEADERS?Sdkzer.DEFAULT_HTTP_HEADERS:[],qsParams:{},data:this.toOriginJSON()}),new js_webservices_1.WebServices.HttpRequest(t).promise.then(function(e){"POST"==s&&(r.attrs.id=e.data.id),r.lastResponse=e})},Sdkzer.prototype.destroy=function(){var e;return e=new js_webservices_1.WebServices.HttpQuery({httpMethod:"DELETE",endpoint:this.baseEndpoint()+"/"+this.attrs.id,headers:Sdkzer.DEFAULT_HTTP_HEADERS?Sdkzer.DEFAULT_HTTP_HEADERS:[],qsParams:{},data:{}}),new js_webservices_1.WebServices.HttpRequest(e).promise},Sdkzer.fetchIndex=function(e){var t,r,s=this,n=[];return new Promise(function(i,o){t=new js_webservices_1.WebServices.HttpQuery({httpMethod:"GET",endpoint:(new s).baseEndpoint(),headers:Sdkzer.DEFAULT_HTTP_HEADERS?Sdkzer.DEFAULT_HTTP_HEADERS:[],qsParams:{},data:{}}),void 0!==e&&(t=js_webservices_1.WebServices.Merger.mergeHttpQueries([t,e])),new js_webservices_1.WebServices.HttpRequest(t).promise.then(function(e){for(var t in e.data)(r=new s).attrs=r.pAttrs=r.$parse(e.data[t]),n.push(r);i(n)},function(e){o(e)})})},Sdkzer.fetchOne=function(e,t){var r,s,n=this,i=new this;return new Promise(function(o,a){r=new js_webservices_1.WebServices.HttpQuery({httpMethod:"GET",endpoint:i.baseEndpoint()+"/"+e,headers:Sdkzer.DEFAULT_HTTP_HEADERS?Sdkzer.DEFAULT_HTTP_HEADERS:[],qsParams:{},data:{}}),void 0!==t&&(r=js_webservices_1.WebServices.Merger.mergeHttpQueries([r,t])),new js_webservices_1.WebServices.HttpRequest(r).promise.then(function(e){(s=new n).attrs=s.pAttrs=s.$parse(e.data),o(s)},function(e){a(e)})})},Sdkzer.DEFAULT_HTTP_HEADERS=[],Sdkzer.HTTP_PATTERN="restful_crud",Sdkzer.PARENTS_FETCH_STRATEGY="none",Sdkzer.HTTP_QUERY_GUESS_CONFIG={restful_crud:{read_collection:{verb:"GET",endpoint:""},read_record:{verb:"GET",endpoint:""},create_record:{verb:"GET",endpoint:""},update_record:{verb:"GET",endpoint:""},delete_record:{verb:"GET",endpoint:""}}},Sdkzer}();exports.Sdkzer=Sdkzer})}]);
//# sourceMappingURL=howerest.sdkzer.js.map